<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="./favicon.png" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="./app.css" />
    <script src="./tables.js"></script>
    <script src="./classes.js"></script>
    <title>Covid-age Tool</title>
  </head>
  <body>
    <main class="container-fluid">
      <div class="row text-center mb-2">
        <div class="col m-3 mb-0">
          <h1 class="pb-2">Covid-age Calculator <span id="dev_mode" class="d-none">(dev mode)</span></h1>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="card text-dark bg-light m-4 mt-2 d-block d-sm-none">
            <div class="card-header fw-bold">Information</div>
            <div class="card-body">
              <p class="card-text">This Covid-age tool helps assess a person's vulnerability to COVID-19.</p>
              <p class="card-text">Because everyone is different, Covid-age is not an exact measure of vulnerability or a clinical/diagnostic tool. Contact support below with any concerns.</p>
            </div>
          </div>
          <div class="row bg-light m-4 mt-2 p-2 pt-3 border rounded">
            <div id="age_grp" class="mb-3">
              <label class="form-label mb-2 fw-bold" for="age">Current age</label>
              <input class="form-control" type="number" name="age" id="age" value="20" min="20" max="75" />
              <div id="ageHelp" class="form-text">If below 20, enter 20. If over 75, enter 75.</div>
            </div>

            <div id="sex_grp" class="mb-3">
              <p class="mb-2 fw-bold">
                Sex
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-question-circle"
                  viewBox="0 0 16 16"
                  data-bs-toggle="popover"
                  data-bs-placement="right"
                  data-bs-content="Sex in this context is your biological sex as recorded at birth"
                >
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                  <path
                    d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"
                  />
                </svg>
              </p>
              <div class="form-check-inline"><input class="form-check-input" type="radio" name="sex" id="female" /> <label class="form-check-label" for="female"> Female</label></div>
              <div class="form-check-inline"><input class="form-check-input" type="radio" name="sex" id="male" /> <label class="form-check-label" for="male"> Male</label></div>
            </div>

            <div class="row mb-0 mb-md-3 pe-0">
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div id="eth_grp" class="">
                  <label for="ethnicity" class="form-label mb-2 fw-bold"
                    >Ethnic background
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16" data-bs-toggle="modal" data-bs-target="#ethnicModal">
                      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                      <path
                        d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"
                      />
                    </svg>
                  </label>
                  <select name="ethnicity" id="ethnicity" class="form-select">
                    <option value="none">Any White background</option>
                    <option value="eth0">Any South Asian background</option>
                    <option value="eth1">Any Black background</option>
                    <option value="eth2">Any Mixed background</option>
                    <option value="eth3">Any Other background</option>
                  </select>
                </div>
              </div>
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div id="bmi_grp">
                  <p class="form-label mb-2 fw-bold">BMI Group</p>
                  <div class="input-group">
                    <button class="btn btn-primary" type="button" id="bmi_disp" data-bs-toggle="modal" data-bs-target="#bmi_modal">Calculate</button>
                    <select name="bmi" id="bmi" class="form-select">
                      <option value="none">Less than 30</option>
                      <option value="bmi0">30 to 34.9</option>
                      <option value="bmi1">35 to 35.9</option>
                      <option value="bmi2">Greater than or equal to 40</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row mb-0 mb-md-3 pe-0">
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div class="ath_grp">
                  <p class="form-label fw-bold" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Asthma is classed as severe if treatment with oral steroids has been required within the last 12 months">Asthma<sup>†</sup></p>
                  <select name="asthma" id="asthma" class="form-select">
                    <option value="none">None</option>
                    <option value="ast0">Mild Asthma</option>
                    <option value="ast1">Severe Asthma</option>
                  </select>
                </div>
              </div>
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div class="diabetes_grp">
                  <p class="form-label fw-bold">Diabetes</p>
                  <select name="diabetes" id="diabetes" class="form-select">
                    <option value="none">None</option>
                    <option value="db0">Type 1 - HbA1c less than or equal to 58 mmol/mol in past year</option>
                    <option value="db1">Type 1 - HbA1c greater than 58 mmol/mol in past year</option>
                    <option value="db2">Type 1 - HbA1c unknown</option>
                    <option value="db3">Type 2 and other - HbA1c less than or equal to 58 mmol/mol in past year</option>
                    <option value="db4">Type 2 and other - HbA1c greater than 58 mmol/mol in past year</option>
                    <option value="db5">Type 2 and other - HbA1c unknown</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="row mb-0 mb-md-3 pe-0">
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div class="kid_grp">
                  <p class="form-label fw-bold">Chronic kidney disease</p>
                  <select name="kidney" id="kidney" class="form-select">
                    <option value="none">None</option>
                    <option value="kd0">Estimated GFR 30-60 mL/min</option>
                    <option value="kd1">Estimated GFR less than 30 mL/min (includes patients on dialysis)</option>
                  </select>
                </div>
              </div>
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div class="hrt_grp">
                  <p class="form-label fw-bold">Heart conditions</p>
                  <select name="heart" id="heart" class="form-select">
                    <option value="none">None</option>
                    <option value="h0">Heart failure</option>
                    <option value="h1">Other chronic heart disease</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="row mb-0 mb-md-3 pe-0">
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div class="blood_grp">
                  <p class="form-label fw-bold" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Including leukaemia, lymphoma or myeloma">Cancer: blood related<sup>†</sup></p>
                  <select name="blood" id="blood" class="form-select">
                    <option value="none">None</option>
                    <option value="bc0">Diagnosed less than 1 year ago</option>
                    <option value="bc1">Diagnosed 1 to 4.9 years ago</option>
                    <option value="bc2">Diagnosed 5 years ago or longer</option>
                  </select>
                </div>
              </div>
              <div class="col-sm-12 col-md-6 mb-3 mb-md-0">
                <div class="nbc_grp">
                  <p class="form-label fw-bold" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Not including leukaemia, lymphoma or myeloma">Cancer: non-blood related<sup>†</sup></p>
                  <select name="nbc" id="nbc" class="form-select">
                    <option value="none">None</option>
                    <option value="nbc0">Diagnosed less than 1 year ago</option>
                    <option value="nbc1">Diagnosed 1 to 4.9 years ago</option>
                    <option value="nbc2">Diagnosed 5 years ago or longer</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="oth_grp mb-3">
              <p class="form-label fw-bold">Other conditions</p>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth0" id="oth0" />
                <label class="form-check-label" for="oth0">Other chronic respiratory disease</label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth1" id="oth1" />
                <label class="form-check-label" for="oth1">Hypertension</label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth2" id="oth2" />
                <label class="form-check-label" for="o2">Cerebrovascular disease</label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth3" id="oth3" />
                <label class="form-check-label" for="o3">Liver disease</label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth4" id="oth4" />
                <label
                  class="form-check-label"
                  for="oth4"
                  data-bs-toggle="tooltip"
                  data-bs-placement="right"
                  title="Includes motor neurone disease, myasthenia gravis, multiple sclerosis, Parkinson's disease, cerebral palsy, quadriplegia, hemiplegia and progressive cerebellar disease"
                  >Chronic neurological disease other than stroke or dementia<sup>†</sup></label
                >
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth5" id="oth5" />
                <label class="form-check-label" for="oth5">Organ transplant recipient</label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth6" id="oth6" />
                <label class="form-check-label" for="oth6" data-bs-toggle="tooltip" data-bs-placement="right" title="Includes splenectomy, or spleen dysfunction (e.g. from sickle cell disease)">Spleen diseases<sup>†</sup></label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth7" id="oth7" />
                <label class="form-check-label" for="oth7">Rheumatoid Arthritis, Lupus or Psoriasis</label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" value="oth8" id="oth8" />
                <label
                  class="form-check-label"
                  for="oth8"
                  data-bs-toggle="tooltip"
                  data-bs-placement="right"
                  title="Includes HIV, conditions inducing permanent immunodeficiency (ever diagnosed), aplastic anaemia, and temporary immunodeficiency recorded within the past year. Does not include treatment with immunosuppressant medication"
                  >Other immunosuppressive condition<sup>†</sup></label
                >
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card text-dark bg-light m-4 mt-2 d-none d-sm-block">
            <div class="card-header fw-bold">Information</div>
            <div class="card-body">
              <p class="card-text">This Covid-age tool helps assess a person's vulnerability to COVID-19. It is based on published evidence for the main identifiable risk factors - age, sex, ethnicity and health.</p>
              <p class="card-text">Because everyone is different, Covid-age is not an exact measure of vulnerability or a clinical/diagnostic tool for medical use, we'll talk to you about any adjustments you need to help keep you safe.</p>
              <p class="card-text">Just fill out the questions on the form and view your Covid-age below.</p>
            </div>
          </div>

          <div id="age_display_block" class="card m-4 bg-primary text-white text-center">
            <div class="card-header p-2 pt-3 fs-3"><h2>Your Covid-age:</h2></div>
            <div class="card-body"><h2 class="fs-1 fw-bold p-2 pt-0" id="display">0</h2></div>
            <div class="card-footer">
              <p class="fs-5 fw-light pt-2">Please make a note of this as the tool does not store your information.</p>
              <h3 id="covid_code" class="fs-2 fw-light d-none pb-3">/00:00:00:00:00:00/</h3>
            </div>
          </div>

          <div class="card-group m-4">
            <div class="card text-dark bg-light">
              <div class="card-header fw-bold">Help for volunteers</div>
              <div class="card-body">
                <p class="card-text mb-1">Volunteer Support Line:</p>
                <a class="card-text mb-3 d-block" href="tel:+448081963652">0808 196 3652</a>
                <p class="card-text mb-1">Contact email:</p>
                <a class="card-text mb-1 d-block" href="mailto:VolunteerSupport@redcross.org.uk?subject=Covid-age Query">VolunteerSupport@redcross.org.uk</a>
                <small class="card-text mb-1 text-muted">Mon - Fri, 10am - 5pm</small>
              </div>
            </div>
            <div class="card text-dark bg-light">
              <div class="card-header fw-bold">Help for staff</div>
              <div class="card-body">
                <p class="card-text mb-1">People Support Line:</p>
                <a class="card-text mb-3 d-block" href="tel:+441418475330">0141 847 5330</a>
                <p class="card-text mb-1">Contact email:</p>
                <a class="card-text mb-1 d-block" href="mailto:PeopleSupport@redcross.org.uk?subject=Covid-age Query">PeopleSupport@redcross.org.uk</a>
                <small class="card-text mb-1 text-muted">Mon - Fri, 9:30am - 5:30pm</small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="bmi_modal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Calculate BMI</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <button id="imp_toggle" class="btn btn-primary">Imperial</button>
              <button id="met_toggle" class="btn btn-primary">Metric</button>
              <br />
              <div id="imperial" class="d-none">
                <br />
                <p>Height:</p>
                <div class="input-group mb-3">
                  <span class="input-group-text" id="hgt_feet">Feet: </span>
                  <input type="number" class="form-control" name="imp_feet" id="imp_feet" min="0" />
                  <span class="input-group-text" id="hgt_feet">Inches: </span>
                  <input type="number" class="form-control" name="imp_inch" id="imp_inch" min="0" />
                </div>
                <p>Weight:</p>
                <div class="input-group mb-3">
                  <span class="input-group-text" id="wgt_stn">Stone: </span>
                  <input type="number" class="form-control" name="imp_stn" id="imp_stn" min="0" />
                  <span class="input-group-text" id="wgt_lbs">Pounds: </span>
                  <input type="number" class="form-control" name="imp_lbs" id="imp_lbs" min="0" />
                </div>
              </div>
              <div id="metric">
                <br />
                <p>Height:</p>
                <div class="input-group mb-3">
                  <span class="input-group-text" id="hgt_m">Meters: </span>
                  <input type="number" class="form-control" name="met_m" id="met_m" min="0" step=".01" />
                </div>
                <p>Weight:</p>
                <div class="input-group mb-3">
                  <span class="input-group-text" id="wgt_kg">Kilograms </span>
                  <input type="number" class="form-control" name="met_kg" id="met_kg" min="0" step=".1" />
                </div>
              </div>
            </div>
            <div class="modal-footer"><span>Your BMI Category is:</span><span id="bmi_cat_disp"></span></div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" id="bmi_calc">Calculate BMI</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="ethnicModal" tabindex="-1" aria-labelledby="ethnicModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="ethnicModalLabel">Ethnic background</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>The ethnic background categories include the following groups:</p>
              <hr />

              <ul class="ps-2 list-unstyled lh-lg">
                <li class="fw-bold">Any White background</li>
                <li class="ps-2">White British</li>
                <li class="ps-2">White Irish</li>
                <li class="ps-2">Any other White background</li>
              </ul>
              <hr />

              <ul class="ps-2 list-unstyled lh-lg">
                <li class="fw-bold">Any South Asian background</li>
                <li class="ps-2">Indian</li>
                <li class="ps-2">Pakistani</li>
                <li class="ps-2">Bangladeshi</li>
                <li class="ps-2">Any other South Asian background</li>
              </ul>
              <hr />

              <ul class="ps-2 list-unstyled lh-lg">
                <li class="fw-bold">Any Black background</li>
                <li class="ps-2">Black Caribbean</li>
                <li class="ps-2">Black African</li>
                <li class="ps-2">Any other Black background</li>
              </ul>
              <hr />

              <ul class="ps-2 list-unstyled lh-lg">
                <li class="fw-bold">Any Mixed background</li>
                <li class="ps-2">White and Black Caribbean</li>
                <li class="ps-2">White and Black African</li>
                <li class="ps-2">White and South Asian</li>
                <li class="ps-2">Any other Mixed background</li>
              </ul>
              <hr />

              <ul class="ps-2 list-unstyled lh-lg">
                <li class="fw-bold">Any Other background</li>
                <li class="ps-2">Chinese</li>
                <li class="ps-2">Any other ethnic background</li>
              </ul>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <div class="container text-center text-muted">
        <hr />
        <small class="pb-4">
          Contact <a href="mailto:jasonstewart@redcross.org.uk?subject=[COVID-TOOL]" class="link-dark">jasonstewart@redcross.org.uk</a> for issues with site | Risk modifiers and values derived and implemented from data provided by
          <a href="https://alama.org.uk/wp-content/uploads/2021/02/Methods-at-201211-2.pdf" class="link-dark">ALAMA.</a>
        </small>
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="./script.js"></script>
  </body>
</html>
